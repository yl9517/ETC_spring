<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.kosta.mapper.BoardMapper">
  
  <parameterMap type="java.util.HashMap" id="hashmap"></parameterMap>
  
  <!-- parameterType 일일히 써주지 않고 map으로 만들기  -->
  	<select id="totalCount" parameterMap="hashmap" resultType="int">
  		select count(*)
  		from employees
  		<!-- mybatis 동적쿼리 -->
  		<where>
  			<if test="searchtxt != null and searchtxt != '' and !searchtxt.equals('')"> <!-- searchtxt가 널이 아닐때 -->
  				<choose>
  					<when test="search=='employee_id'">
  						and employee_id = #{searchtxt}
  					</when>
  					<when test="search=='first_name'">
  						and first_name like '%'||upper(#{searchtxt})||'%'
  					</when>
  					<when test="search=='department_id'">
  						and department_id=#{searchtxt}
  					</when>
  				</choose>
  			</if>
  		</where>
  	</select>
  </mapper> 